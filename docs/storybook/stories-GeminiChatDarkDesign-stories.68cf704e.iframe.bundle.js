"use strict";(self.webpackChunkreact_neuro=self.webpackChunkreact_neuro||[]).push([[334],{"./src/components/MaterialMarkdown.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>MaterialMarkdown});var react_markdown__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-markdown/lib/index.js"),_mui_material__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mui/material/styles/useTheme.js"),_mui_material__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js"),_mui_material__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mui/material/Link/Link.js"),_mui_material__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mui/material/List/List.js"),_mui_material__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mui/material/ListItem/ListItem.js"),_mui_material__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@mui/material/Divider/Divider.js"),_mui_material__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@mui/material/Paper/Paper.js"),_mui_material__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@mui/material/Box/Box.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const MaterialMarkdown=_ref=>{let{content}=_ref;const theme=(0,_mui_material__WEBPACK_IMPORTED_MODULE_1__.A)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_markdown__WEBPACK_IMPORTED_MODULE_2__.oz,{components:{h1:_ref2=>{let{node,...props}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{variant:"h3",gutterBottom:!0,...props})},h2:_ref3=>{let{node,...props}=_ref3;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{variant:"h4",gutterBottom:!0,...props})},h3:_ref4=>{let{node,...props}=_ref4;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{variant:"h5",gutterBottom:!0,...props})},p:_ref5=>{let{node,...props}=_ref5;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{variant:"body1",paragraph:!0,sx:{m:0},...props})},a:_ref6=>{let{node,...props}=_ref6;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_4__.A,{color:"secondary",underline:"hover",target:"_blank",rel:"noopener",...props})},ul:_ref7=>{let{node,...props}=_ref7;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_5__.A,{dense:!0,sx:{pl:4},...props})},ol:_ref8=>{let{node,...props}=_ref8;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_5__.A,{component:"ol",dense:!0,sx:{pl:4},...props})},li:_ref9=>{let{node,...props}=_ref9;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_6__.Ay,{sx:{display:"list-item",listStyleType:"disc",p:0,pl:"4px"},...props})},hr:_ref10=>{let{node,...props}=_ref10;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_7__.A,{sx:{my:2},...props})},blockquote:_ref11=>{let{node}=_ref11;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_8__.A,{variant:"outlined",sx:{p:2,my:2,borderLeft:`4px solid ${theme.palette.divider}`,bgcolor:"background.default"}})},code:_ref12=>{let{node,...props}=_ref12;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_9__.A,{component:"span",sx:{fontFamily:"monospace",bgcolor:"action.hover",px:.5,borderRadius:1,whiteSpace:"pre-wrap",p:2,my:1,display:"block"},...props})},strong:_ref13=>{let{node,...props}=_ref13;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{component:"span",fontWeight:"bold",...props})},em:_ref14=>{let{node,...props}=_ref14;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{component:"span",fontStyle:"italic",...props})}},children:content})};MaterialMarkdown.__docgenInfo={description:"",methods:[],displayName:"MaterialMarkdown",props:{content:{required:!0,tsType:{name:"string"},description:""}}}},"./src/hooks/useAgentKey.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>useAgentKey});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const useAgentKey=()=>{const[apiKey,setApiKey]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((()=>{try{const savedData=localStorage.getItem("API_KEY");if(savedData){const parsedData=JSON.parse(savedData);if(parsedData.length>0)return parsedData}}catch(error){console.error("Error load from localStorage key API_KEY:",error)}return""}));(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{try{const valueToStore=JSON.stringify(apiKey);localStorage.setItem("API_KEY",valueToStore)}catch(error){console.error("Error saving to localStorage key API_KEY:",error)}}),[apiKey]);return{apiKey,setApiKey,deleteKey:()=>{localStorage.removeItem("API_KEY"),setApiKey("")}}}},"./src/stories/GeminiChatDarkDesign.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>GeminiChatDarkDesign_stories});var createTheme=__webpack_require__("./node_modules/@mui/material/styles/createTheme.js"),ThemeProvider=__webpack_require__("./node_modules/@mui/material/styles/ThemeProvider.js"),Container=__webpack_require__("./node_modules/@mui/material/Container/Container.js"),react=__webpack_require__("./node_modules/react/index.js"),List=__webpack_require__("./node_modules/@mui/material/List/List.js"),ListItem=__webpack_require__("./node_modules/@mui/material/ListItem/ListItem.js"),Paper=__webpack_require__("./node_modules/@mui/material/Paper/Paper.js"),MaterialMarkdown=__webpack_require__("./src/components/MaterialMarkdown.tsx"),grey=__webpack_require__("./node_modules/@mui/material/colors/grey.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const ChatList=_ref=>{let{messages}=_ref;return(0,jsx_runtime.jsx)(List.A,{sx:{display:"flex",flexDirection:"column"},children:messages.map(((_ref2,index)=>{let{parts,role}=_ref2;return(0,jsx_runtime.jsx)(ListItem.Ay,{sx:{justifyContent:"user"===role?"flex-end":"flex-start",alignItems:"flex-start",px:0},children:(0,jsx_runtime.jsx)(Paper.A,{sx:"user"===role?{p:1,backgroundColor:grey.A[600]}:{p:1},children:(0,jsx_runtime.jsx)(MaterialMarkdown.d,{content:parts[0].text})})},index)}))})};ChatList.__docgenInfo={description:"",methods:[],displayName:"ChatList",props:{messages:{required:!0,tsType:{name:"Array",elements:[{name:"IMessage"}],raw:"Array<IMessage>"},description:""}}};var useTheme=__webpack_require__("./node_modules/@mui/material/styles/useTheme.js"),useMediaQuery=__webpack_require__("./node_modules/@mui/material/useMediaQuery/index.js"),Box=__webpack_require__("./node_modules/@mui/material/Box/Box.js"),Typography=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js"),Button=__webpack_require__("./node_modules/@mui/material/Button/Button.js"),CircularProgress=__webpack_require__("./node_modules/@mui/material/CircularProgress/CircularProgress.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js");const breakpoints_xs="@media (min-width: 0px)",breakpoints_sm="@media (min-width: 600px)",breakpoints_md="@media (min-width: 900px)",breakpoints_xl="@media (min-width: 1536px)",ChatTextarea=styled_components_browser_esm.Ay.textarea((_ref=>{let{$backgroundColor,$color,$placeholderColor,$borderRadius,$padding,$minHeight}=_ref;return{backgroundColor:$backgroundColor?$backgroundColor+"4d":"transparent",color:$color||"white",borderRadius:$borderRadius?`${$borderRadius}px`:0,padding:$padding?`${$padding}px`:0,margin:0,overflow:"hidden",fontSize:"16px",resize:"none",width:"100%",display:"block",boxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box",outline:"none",outlineStyle:"none",border:"none","&::placeholder":{color:$placeholderColor||"white"},[breakpoints_xs]:{minHeight:"180px"},[breakpoints_sm]:{minHeight:"140px"},[breakpoints_md]:{minHeight:"120px"},[breakpoints_xl]:{minHeight:"100px"}}}));var Send=__webpack_require__("./node_modules/@mui/icons-material/esm/Send.js");const InputBox=_ref=>{let{textareaValue,setTextareaValue,handleSubmit,loading}=_ref;const theme=(0,useTheme.A)(),textareaRef=(0,react.useRef)(null),isMobile=(0,useMediaQuery.A)(theme.breakpoints.down("md"));return(0,jsx_runtime.jsx)(Box.A,{sx:{padding:2,borderRadius:2,backgroundColor:grey.A[800],transform:"translateZ(0)"},children:(0,jsx_runtime.jsxs)("form",{style:{display:"flex",flexFlow:"column"},onSubmit:handleSubmit,onKeyDown:e=>{e.ctrlKey&&("Enter"===e.key||e.metaKey)&&(e.preventDefault(),handleSubmit(e)),"Enter"!==e.key||e.ctrlKey||e.metaKey||e.preventDefault()},children:[(0,jsx_runtime.jsx)(ChatTextarea,{$backgroundColor:grey.A[400],$color:"black",$placeholderColor:grey.A[900],$borderRadius:8,$padding:16,$minHeight:96,placeholder:"Enter your question",ref:textareaRef,value:textareaValue,onChange:e=>{const target=e.target;setTextareaValue(target.value),textareaRef.current&&(textareaRef.current.style.height="auto",textareaRef.current.style.height=`${target.scrollHeight}px`)},onKeyDown:e=>{},disabled:loading}),(0,jsx_runtime.jsxs)(Box.A,{sx:{display:"flex",alignItems:"center",justifyContent:"right",marginTop:"8px"},children:[isMobile?null:(0,jsx_runtime.jsx)(Typography.A,{variant:"caption",sx:{color:grey.A[600],mr:2},children:"To send, press Control(Ctrl) + Enter"}),(0,jsx_runtime.jsx)(Button.A,{type:"submit",endIcon:(0,jsx_runtime.jsx)(Send.A,{}),color:"primary",variant:"contained",disabled:loading,startIcon:loading?(0,jsx_runtime.jsx)(CircularProgress.A,{size:20}):null,sx:{borderRadius:2,backgroundColor:grey.A[500],"&:hover":{backgroundColor:grey.A[600]},color:"black"},children:loading?"Processing...":"Send"})]})]})})};InputBox.__docgenInfo={description:"",methods:[],displayName:"InputBox",props:{textareaValue:{required:!0,tsType:{name:"string"},description:""},setTextareaValue:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string>",elements:[{name:"string"}]}]},description:""},handleSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.FormEvent) => Promise<void>",signature:{arguments:[{type:{name:"ReactFormEvent",raw:"React.FormEvent"},name:"e"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},loading:{required:!0,tsType:{name:"boolean"},description:""}}};const ScrollBox=_ref=>{let{children,ref}=_ref;return(0,jsx_runtime.jsx)(Box.A,{ref,sx:{display:"flex",flexDirection:"row",height:"100%",minHeight:"100%",position:"fixed",top:0,bottom:0,left:0,right:0,overflowY:"auto",backgroundColor:"#0a0a0a"},children})};ScrollBox.__docgenInfo={description:"",methods:[],displayName:"ScrollBox",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},ref:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement | null>",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}]},description:""}}};var KeyboardArrowDown=__webpack_require__("./node_modules/@mui/icons-material/esm/KeyboardArrowDown.js"),Zoom=__webpack_require__("./node_modules/@mui/material/Zoom/Zoom.js");const ScrollToBottomButton=_ref=>{let{show,onClick}=_ref;return(0,jsx_runtime.jsx)(Box.A,{sx:{position:"absolute",top:-56,width:"100%",left:0,zIndex:1e3,display:"flex",justifyContent:"flex-end"},children:(0,jsx_runtime.jsx)(Zoom.A,{in:show,children:(0,jsx_runtime.jsx)(Button.A,{onClick:e=>{e.stopPropagation(),e.preventDefault(),void 0!==onClick&&onClick()},variant:"contained",sx:{p:1,m:0,minWidth:"max-content",borderRadius:"50%"},children:(0,jsx_runtime.jsx)(KeyboardArrowDown.A,{})})})})};ScrollToBottomButton.__docgenInfo={description:"",methods:[],displayName:"ScrollToBottomButton",props:{onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},show:{required:!0,tsType:{name:"boolean"},description:""}}};const ROLE_USER="user",ROLE_MODEL="model";function isObjectNotNull(x){return"object"==typeof x&&null!==x}function isMessage(x){return isObjectNotNull(x)&&"role"in x&&function isRole(x){return x===ROLE_MODEL||x===ROLE_USER}(x.role)&&"parts"in x&&Array.isArray(x.parts)&&(0===x.parts.length||function isPart(x){return isObjectNotNull(x)&&"text"in x&&"string"==typeof x.text}(x.parts[0]))}function isChatsState(x){return isObjectNotNull(x)&&"currentIndex"in x&&"number"==typeof x.currentIndex&&"chats"in x&&Array.isArray(x.chats)&&(0===x.chats.length||function isChat(x){return isObjectNotNull(x)&&"preview"in x&&"string"==typeof x.preview&&"messages"in x&&Array.isArray(x.messages)&&(0===x.messages.length||isMessage(x.messages[0]))}(x.chats[0]))}var useAgentKey=__webpack_require__("./src/hooks/useAgentKey.ts"),web=__webpack_require__("./node_modules/@google/genai/dist/web/index.mjs");const initializeChatsState=()=>{const loaded=(key=>{let loadedData=null;try{const data=localStorage.getItem(key);data&&(loadedData=JSON.parse(data))}catch(error){console.error(`Error load from localStorage key ${key}:`,error)}return loadedData})("CHATS_STATE");return isChatsState(loaded)?loaded:{currentIndex:0,chats:[{preview:"",messages:[]}]}},useChats=()=>{const{apiKey,setApiKey,deleteKey}=(0,useAgentKey.G)(),genAI=(0,react.useMemo)((()=>new web.M4({apiKey})),[apiKey]),[chatsState,setChatsState]=(0,react.useState)(initializeChatsState),[loading,setLoading]=(0,react.useState)(!1),[error,setError]=(0,react.useState)("");(0,react.useEffect)((()=>{((key,valueToStore)=>{try{const date=JSON.stringify(valueToStore);localStorage.setItem(key,date)}catch(error){console.error(`Error saving to localStorage key ${key}: `,error)}})("CHATS_STATE",chatsState)}),[chatsState]);return{apiKey,setApiKey,deleteKey,chatsState,loading,error,changeChat:index=>{loading||setChatsState((previousState=>({currentIndex:index,chats:previousState.chats.map((chat=>({preview:chat.preview,messages:chat.messages.map((message=>({role:message.role,parts:message.parts.map((part=>({...part})))})))})))})))},addNewChat:()=>{loading||(0!==chatsState.chats[chatsState.chats.length-1].messages.length?setChatsState((previousState=>{const newChatsState={currentIndex:previousState.chats.length,chats:previousState.chats.map((chat=>({preview:chat.preview,messages:chat.messages.map((message=>({role:message.role,parts:message.parts.map((part=>({...part})))})))})))};return newChatsState.chats.push({preview:"",messages:[]}),newChatsState})):setChatsState((previousState=>({currentIndex:previousState.chats.length-1,chats:previousState.chats.map((chat=>({preview:chat.preview,messages:chat.messages.map((message=>({role:message.role,parts:message.parts.map((p=>({...p})))})))})))}))))},deleteChat:()=>{loading||1===chatsState.chats.length||setChatsState((previousState=>{const newChatsState={currentIndex:previousState.currentIndex,chats:[]};for(let i=0;i<previousState.chats.length;i++)i!==previousState.currentIndex&&newChatsState.chats.push({preview:previousState.chats[i].preview,messages:previousState.chats[i].messages.map((message=>({role:message.role,parts:message.parts.map((part=>({...part})))})))});return newChatsState.currentIndex=newChatsState.chats.length-1,newChatsState}))},nextChat:()=>{loading||setChatsState((previousState=>({currentIndex:previousState.currentIndex!==previousState.chats.length-1?previousState.currentIndex+1:0,chats:previousState.chats.map((chat=>({preview:chat.preview,messages:chat.messages.map((message=>({role:message.role,parts:message.parts.map((part=>({...part})))})))})))})))},clearMessages:()=>{},handleSubmit:async(e,textareaValue)=>{if(!loading){const inputText=textareaValue;if(!inputText.trim())return;setLoading(!0),setError("");const messagesWithInput=chatsState.chats[chatsState.currentIndex].messages.map((message=>({...message,parts:[{...message.parts[0]}]})));messagesWithInput.push({parts:[{text:inputText}],role:ROLE_USER});try{console.log("messagesWithInput in try: ",messagesWithInput);const result=await genAI.models.generateContentStream({model:"gemini-2.0-flash-001",contents:messagesWithInput});setChatsState((previousState=>({currentIndex:previousState.currentIndex,chats:previousState.chats.map(((chat,chatIndex)=>({preview:chat.preview,messages:previousState.currentIndex===chatIndex?[...messagesWithInput,{parts:[{text:""}],role:ROLE_MODEL}]:chat.messages.map((message=>({...message,parts:[{...message.parts[0]}]})))})))})));for await(const chunk of result){const chunkText=chunk.text;setChatsState((previousState=>({currentIndex:previousState.currentIndex,chats:previousState.chats.map(((chat,chatIndex)=>({preview:chat.preview,messages:chat.messages.map(((message,тessageIndex,messageArray)=>({role:message.role,parts:[chatIndex!==previousState.currentIndex||тessageIndex!==messageArray.length-1?{...message.parts[0]}:{text:message.parts[0].text+chunkText}]})))})))})))}}catch(error){setError("Error: "+(error instanceof Error?error.message:"Failed to fetch")),console.error("API Error:",error)}finally{setLoading(!1)}}}}},BottomPanel=_ref=>{let{children,isNoMessages}=_ref;return(0,jsx_runtime.jsx)(Box.A,{sx:{position:"sticky",left:0,right:0,zIndex:1e3,mb:2,bottom:16,...isNoMessages&&{width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center","& > *":{width:{xs:"90%",sm:"80%",md:"70%",lg:"60%"}}}},children})};BottomPanel.__docgenInfo={description:"",methods:[],displayName:"BottomPanel",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},isNoMessages:{required:!0,tsType:{name:"boolean"},description:""}}};var Divider=__webpack_require__("./node_modules/@mui/material/Divider/Divider.js"),Chip=__webpack_require__("./node_modules/@mui/material/Chip/Chip.js"),Stack=__webpack_require__("./node_modules/@mui/material/Stack/Stack.js"),VpnKey=__webpack_require__("./node_modules/@mui/icons-material/esm/VpnKey.js"),AddComment=__webpack_require__("./node_modules/@mui/icons-material/esm/AddComment.js"),Delete=__webpack_require__("./node_modules/@mui/icons-material/esm/Delete.js"),MenuOpen=__webpack_require__("./node_modules/@mui/icons-material/esm/MenuOpen.js"),Menu=__webpack_require__("./node_modules/@mui/icons-material/esm/Menu.js");const TopControlPanelButton=_ref=>{let{text,onClick,startIcon,parentBorderRadius,parentPadding}=_ref;const theme=(0,useTheme.A)(),borderRadius=void 0!==parentBorderRadius&&void 0!==parentPadding?parentBorderRadius-parentPadding+1:1;return(0,jsx_runtime.jsx)(Button.A,{onClick:e=>{e.stopPropagation(),e.preventDefault(),void 0!==onClick&&onClick()},startIcon,variant:"contained",sx:{cursor:"pointer",borderRadius:theme.spacing(borderRadius),backgroundColor:grey.A[500],"&:hover":{backgroundColor:grey.A[600]},color:"black"},children:text})};TopControlPanelButton.__docgenInfo={description:"",methods:[],displayName:"TopControlPanelButton",props:{text:{required:!1,tsType:{name:"string"},description:""},startIcon:{required:!1,tsType:{name:"ReactNode"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},parentBorderRadius:{required:!1,tsType:{name:"number"},description:""},parentPadding:{required:!1,tsType:{name:"number"},description:""}}};var Dialog=__webpack_require__("./node_modules/@mui/material/Dialog/Dialog.js"),DialogContent=__webpack_require__("./node_modules/@mui/material/DialogContent/DialogContent.js"),DialogTitle=__webpack_require__("./node_modules/@mui/material/DialogTitle/DialogTitle.js"),IconButton=__webpack_require__("./node_modules/@mui/material/IconButton/IconButton.js"),TextField=__webpack_require__("./node_modules/@mui/material/TextField/TextField.js"),Close=__webpack_require__("./node_modules/@mui/icons-material/esm/Close.js");const ApiKeyDialog=_ref=>{let{openDialog,setOpenDialog,apiKey,setApiKey,deleteKey}=_ref;const DialogProps={open:openDialog,onClose:()=>setOpenDialog(!1)},IconBtnCloseProps={"aria-label":"close",onClick:()=>setOpenDialog(!1),sx:{position:"absolute",right:8,top:8,color:grey.A[500]}},TextFieldProps={autoComplete:"off",fullWidth:!0,type:"password",label:"Enter your key",value:apiKey,onChange:event=>setApiKey(event.target.value)},BtnDeleteKeyProps={children:"Delete Key",onClick:()=>{deleteKey()},variant:"contained",color:"error"};return(0,jsx_runtime.jsx)(Dialog.A,{...DialogProps,children:(0,jsx_runtime.jsxs)(DialogContent.A,{children:[(0,jsx_runtime.jsx)(DialogTitle.A,{sx:{m:0,p:2},children:"Gemini API Key"}),(0,jsx_runtime.jsx)(IconButton.A,{...IconBtnCloseProps,children:(0,jsx_runtime.jsx)(Close.A,{})}),(0,jsx_runtime.jsxs)(Stack.A,{spacing:{xs:1,sm:2},sx:{width:{sm:"300px",md:"500px"}},children:[(0,jsx_runtime.jsx)(TextField.A,{...TextFieldProps}),(0,jsx_runtime.jsx)(Button.A,{...BtnDeleteKeyProps})]})]})})};ApiKeyDialog.__docgenInfo={description:"",methods:[],displayName:"ApiKeyDialog",props:{openDialog:{required:!0,tsType:{name:"boolean"},description:""},setOpenDialog:{required:!0,tsType:{name:"signature",type:"function",raw:"(b: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"b"}],return:{name:"void"}}},description:""},apiKey:{required:!0,tsType:{name:"string"},description:""},setApiKey:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string>",elements:[{name:"string"}]}]},description:""},deleteKey:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const LeftPanel=_ref=>{let{apiKey,setApiKey,chatsState,changeChat,addNewChat,deleteChat,deleteKey}=_ref;const[openPanel,setOpenPanel]=(0,react.useState)(!0),[openDialog,setOpenDialog]=(0,react.useState)(!1),BtnPropsAPIKey={text:"API Key",startIcon:(0,jsx_runtime.jsx)(VpnKey.A,{}),onClick:()=>setOpenDialog(!0),parentPadding:1,parentBorderRadius:1},BtnPropsNewChat={text:"New Chat",startIcon:(0,jsx_runtime.jsx)(AddComment.A,{}),onClick:addNewChat,parentPadding:1,parentBorderRadius:1},BtnPropsDeleteChat={text:"Delete Chat",startIcon:(0,jsx_runtime.jsx)(Delete.A,{}),onClick:deleteChat,parentPadding:1,parentBorderRadius:1},ApiKeyDialogProps={openDialog,setOpenDialog,apiKey,setApiKey,deleteKey};return(0,jsx_runtime.jsxs)(Box.A,{sx:{width:openPanel?"300px":"max-content",height:"100vh",backgroundColor:grey.A.A700,position:"sticky",left:0,top:0,p:1},children:[(0,jsx_runtime.jsx)(Button.A,{variant:"contained",sx:{width:"100%",wordBreak:"break-word",height:"48px","& .MuiButton-endIcon":{ml:openPanel?"8px":0,mr:0}},endIcon:openPanel?(0,jsx_runtime.jsx)(MenuOpen.A,{}):(0,jsx_runtime.jsx)(Menu.A,{}),onClick:e=>{e.stopPropagation(),e.preventDefault(),setOpenPanel((p=>!p))},children:openPanel?"Close sidebar":null}),openPanel?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Divider.A,{sx:{mt:2,mb:2,color:grey.A[100]},children:(0,jsx_runtime.jsx)(Chip.A,{label:"Control",size:"small"})}),(0,jsx_runtime.jsxs)(Box.A,{sx:{display:"flex",flexDirection:"column","& > :not(*:first-of-type)":{mt:1}},children:[(0,jsx_runtime.jsx)(TopControlPanelButton,{...BtnPropsAPIKey}),(0,jsx_runtime.jsx)(TopControlPanelButton,{...BtnPropsNewChat}),(0,jsx_runtime.jsx)(TopControlPanelButton,{...BtnPropsDeleteChat}),(0,jsx_runtime.jsx)(ApiKeyDialog,{...ApiKeyDialogProps})]}),(0,jsx_runtime.jsx)(Divider.A,{sx:{mt:2,mb:2,color:grey.A[100]},children:(0,jsx_runtime.jsx)(Chip.A,{label:"Chats",size:"small"})}),(0,jsx_runtime.jsx)(Box.A,{sx:{backgroundColor:grey.A[900],width:"100%",borderRadius:2,boxShadow:4},children:(0,jsx_runtime.jsx)(Stack.A,{sx:{p:1},children:chatsState.chats.map(((c,i,a)=>0!==c.messages.length?(0,jsx_runtime.jsxs)(Box.A,{children:[(0,jsx_runtime.jsx)(Button.A,{onClick:()=>changeChat(i),children:(0,jsx_runtime.jsx)(Typography.A,{variant:"body2",gutterBottom:!0,sx:{overflowX:"hidden",wordWrap:"normal",wordBreak:"keep-all"},children:c.messages[0].parts[0].text})}),i>0||i<a.length-1?(0,jsx_runtime.jsx)(Divider.A,{variant:"middle"}):null]},i):null))})})]}):null]})};LeftPanel.__docgenInfo={description:"",methods:[],displayName:"LeftPanel",props:{apiKey:{required:!0,tsType:{name:"string"},description:""},setApiKey:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string>",elements:[{name:"string"}]}]},description:""},chatsState:{required:!0,tsType:{name:"IChatsState"},description:""},changeChat:{required:!0,tsType:{name:"signature",type:"function",raw:"(i: number) => void",signature:{arguments:[{type:{name:"number"},name:"i"}],return:{name:"void"}}},description:""},addNewChat:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},deleteChat:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},deleteKey:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const theme=(0,createTheme.A)({palette:{mode:"dark"}}),GeminiChatDarkDesign=()=>{const[textareaValue,setTextareaValue]=(0,react.useState)(""),{apiKey,setApiKey,deleteKey,chatsState,loading,changeChat,addNewChat,deleteChat,handleSubmit}=useChats(),{showScrollDownButton,scrollContainerRef,scrollToBottom}=(messages=>{const[showScrollDownButton,setShowScrollDownButton]=(0,react.useState)(!1),scrollContainerRef=(0,react.useRef)(null),scrollToBottom=()=>{var _scrollContainerRef$c;null!==scrollContainerRef&&(null===(_scrollContainerRef$c=scrollContainerRef.current)||void 0===_scrollContainerRef$c||_scrollContainerRef$c.scrollTo({top:scrollContainerRef.current.scrollHeight,behavior:"smooth"}))},handleScroll=()=>{if(null===scrollContainerRef||null===scrollContainerRef.current)return;const{scrollTop,scrollHeight,clientHeight}=scrollContainerRef.current;setShowScrollDownButton(!(scrollHeight-(scrollTop+clientHeight)<272))};return(0,react.useEffect)((()=>{if(null===scrollContainerRef||null===scrollContainerRef.current)return;const container=scrollContainerRef.current;return container.addEventListener("scroll",handleScroll),()=>container.removeEventListener("scroll",handleScroll)}),[]),(0,react.useEffect)((()=>{scrollToBottom()}),[]),(0,react.useEffect)((()=>{scrollToBottom()}),[messages]),{showScrollDownButton,scrollContainerRef,scrollToBottom}})(chatsState.chats[chatsState.currentIndex].messages),LeftPanelProps={apiKey,setApiKey,chatsState,changeChat,addNewChat,deleteChat,deleteKey};return(0,jsx_runtime.jsx)(ThemeProvider.A,{theme,children:(0,jsx_runtime.jsxs)(ScrollBox,{ref:scrollContainerRef,children:[(0,jsx_runtime.jsx)(LeftPanel,{...LeftPanelProps}),(0,jsx_runtime.jsxs)(Container.A,{children:[(0,jsx_runtime.jsx)(Container.A,{sx:{mt:1,mb:1},children:(0,jsx_runtime.jsx)(ChatList,{messages:chatsState.chats[chatsState.currentIndex].messages})}),(0,jsx_runtime.jsxs)(BottomPanel,{isNoMessages:0===chatsState.chats[chatsState.currentIndex].messages.length,children:[(0,jsx_runtime.jsx)(ScrollToBottomButton,{show:showScrollDownButton,onClick:scrollToBottom}),(0,jsx_runtime.jsx)(InputBox,{textareaValue,setTextareaValue,handleSubmit:e=>{e.preventDefault();const text=textareaValue;return setTextareaValue(""),handleSubmit(e,text)},loading})]})]})]})})};GeminiChatDarkDesign.__docgenInfo={description:"",methods:[],displayName:"GeminiChatDarkDesign"};const GeminiChatDarkDesign_stories={title:"Apps/GeminiChatDarkDesign",component:GeminiChatDarkDesign,parameters:{layout:"fullscreen"}},Default={args:{}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {}\n}",...Default.parameters?.docs?.source}}}}}]);