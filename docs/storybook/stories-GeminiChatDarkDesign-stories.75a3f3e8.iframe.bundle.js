"use strict";(self.webpackChunkreact_neuro=self.webpackChunkreact_neuro||[]).push([[334],{"./src/components/MaterialMarkdown.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>MaterialMarkdown});var react_markdown__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-markdown/lib/index.js"),_mui_material__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mui/material/styles/useTheme.js"),_mui_material__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js"),_mui_material__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mui/material/Link/Link.js"),_mui_material__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mui/material/List/List.js"),_mui_material__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mui/material/ListItem/ListItem.js"),_mui_material__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@mui/material/Divider/Divider.js"),_mui_material__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@mui/material/Paper/Paper.js"),_mui_material__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@mui/material/Box/Box.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const MaterialMarkdown=_ref=>{let{content}=_ref;const theme=(0,_mui_material__WEBPACK_IMPORTED_MODULE_1__.A)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_markdown__WEBPACK_IMPORTED_MODULE_2__.oz,{components:{h1:_ref2=>{let{node,...props}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{variant:"h3",gutterBottom:!0,...props})},h2:_ref3=>{let{node,...props}=_ref3;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{variant:"h4",gutterBottom:!0,...props})},h3:_ref4=>{let{node,...props}=_ref4;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{variant:"h5",gutterBottom:!0,...props})},p:_ref5=>{let{node,...props}=_ref5;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{variant:"body1",paragraph:!0,sx:{m:0},...props})},a:_ref6=>{let{node,...props}=_ref6;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_4__.A,{color:"secondary",underline:"hover",target:"_blank",rel:"noopener",...props})},ul:_ref7=>{let{node,...props}=_ref7;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_5__.A,{dense:!0,sx:{pl:4},...props})},ol:_ref8=>{let{node,...props}=_ref8;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_5__.A,{component:"ol",dense:!0,sx:{pl:4},...props})},li:_ref9=>{let{node,...props}=_ref9;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_6__.Ay,{sx:{display:"list-item",listStyleType:"disc",p:0,pl:"4px"},...props})},hr:_ref10=>{let{node,...props}=_ref10;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_7__.A,{sx:{my:2},...props})},blockquote:_ref11=>{let{node}=_ref11;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_8__.A,{variant:"outlined",sx:{p:2,my:2,borderLeft:`4px solid ${theme.palette.divider}`,bgcolor:"background.default"}})},code:_ref12=>{let{node,...props}=_ref12;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_9__.A,{component:"span",sx:{fontFamily:"monospace",bgcolor:"action.hover",px:.5,borderRadius:1,whiteSpace:"pre-wrap",p:2,my:1,display:"block"},...props})},strong:_ref13=>{let{node,...props}=_ref13;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{component:"span",fontWeight:"bold",...props})},em:_ref14=>{let{node,...props}=_ref14;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{component:"span",fontStyle:"italic",...props})}},children:content})};MaterialMarkdown.__docgenInfo={description:"",methods:[],displayName:"MaterialMarkdown",props:{content:{required:!0,tsType:{name:"string"},description:""}}}},"./src/hooks/useAgentKey.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>useAgentKey});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const useAgentKey=()=>{const[apiKey,setApiKey]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((()=>{try{const savedData=localStorage.getItem("API_KEY");if(savedData){const parsedData=JSON.parse(savedData);if(parsedData.length>0)return parsedData}}catch(error){console.error("Error load from localStorage key API_KEY:",error)}return""}));(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{try{const valueToStore=JSON.stringify(apiKey);localStorage.setItem("API_KEY",valueToStore)}catch(error){console.error("Error saving to localStorage key API_KEY:",error)}}),[apiKey]);return{apiKey,setApiKey,deleteKey:()=>{localStorage.removeItem("API_KEY"),setApiKey("")}}}},"./src/stories/GeminiChatDarkDesign.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>GeminiChatDarkDesign_stories});var createTheme=__webpack_require__("./node_modules/@mui/material/styles/createTheme.js"),ThemeProvider=__webpack_require__("./node_modules/@mui/material/styles/ThemeProvider.js"),CssBaseline=__webpack_require__("./node_modules/@mui/material/CssBaseline/CssBaseline.js"),GlobalStyles=__webpack_require__("./node_modules/@mui/material/GlobalStyles/GlobalStyles.js"),Box=__webpack_require__("./node_modules/@mui/material/Box/Box.js"),Container=__webpack_require__("./node_modules/@mui/material/Container/Container.js"),useAgentKey=__webpack_require__("./src/hooks/useAgentKey.ts"),react=__webpack_require__("./node_modules/react/index.js"),List=__webpack_require__("./node_modules/@mui/material/List/List.js"),ListItem=__webpack_require__("./node_modules/@mui/material/ListItem/ListItem.js"),Paper=__webpack_require__("./node_modules/@mui/material/Paper/Paper.js"),MaterialMarkdown=__webpack_require__("./src/components/MaterialMarkdown.tsx"),grey=__webpack_require__("./node_modules/@mui/material/colors/grey.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const ChatList=_ref=>{let{messages}=_ref;return(0,jsx_runtime.jsx)(List.A,{sx:{display:"flex",flexDirection:"column"},children:messages.map(((_ref2,index)=>{let{parts,role}=_ref2;return(0,jsx_runtime.jsx)(ListItem.Ay,{sx:{justifyContent:"user"===role?"flex-end":"flex-start",alignItems:"flex-start"},children:(0,jsx_runtime.jsx)(Paper.A,{sx:"user"===role?{p:1,backgroundColor:grey.A[600]}:{p:1},children:(0,jsx_runtime.jsx)(MaterialMarkdown.d,{content:parts[0].text})})},index)}))})};ChatList.__docgenInfo={description:"",methods:[],displayName:"ChatList",props:{messages:{required:!0,tsType:{name:"Array",elements:[{name:"IMessage"}],raw:"IMessage[]"},description:""}}};const ROLE_USER="user",ROLE_MODEL="model";var Button=__webpack_require__("./node_modules/@mui/material/Button/Button.js"),Dialog=__webpack_require__("./node_modules/@mui/material/Dialog/Dialog.js"),DialogContent=__webpack_require__("./node_modules/@mui/material/DialogContent/DialogContent.js"),DialogTitle=__webpack_require__("./node_modules/@mui/material/DialogTitle/DialogTitle.js"),IconButton=__webpack_require__("./node_modules/@mui/material/IconButton/IconButton.js"),Stack=__webpack_require__("./node_modules/@mui/material/Stack/Stack.js"),TextField=__webpack_require__("./node_modules/@mui/material/TextField/TextField.js"),VpnKey=__webpack_require__("./node_modules/@mui/icons-material/esm/VpnKey.js"),Delete=__webpack_require__("./node_modules/@mui/icons-material/esm/Delete.js"),Close=__webpack_require__("./node_modules/@mui/icons-material/esm/Close.js");const ControlPanel=_ref=>{let{clearMessages,apiKey,setApiKey,deleteKey}=_ref;const[openDialog,setOpenDialog]=(0,react.useState)(!1),handleDialogClose=()=>{setOpenDialog(!1)};return(0,jsx_runtime.jsxs)(Box.A,{sx:{display:"flex",p:1,backgroundColor:grey.A[900],borderRadius:2,"&>:not(button:first-of-type)":{ml:2}},children:[(0,jsx_runtime.jsx)(Button.A,{onClick:()=>{setOpenDialog(!0)},startIcon:(0,jsx_runtime.jsx)(VpnKey.A,{}),variant:"contained",sx:{backgroundColor:grey.A[500],"&:hover":{backgroundColor:grey.A[600]},color:"black"},children:"API Key"}),(0,jsx_runtime.jsx)(Button.A,{onClick:clearMessages,startIcon:(0,jsx_runtime.jsx)(Delete.A,{}),variant:"contained",sx:{backgroundColor:grey.A[500],"&:hover":{backgroundColor:grey.A[600]},color:"black"},children:"Clear Chat"}),(0,jsx_runtime.jsx)(Dialog.A,{open:openDialog,onClose:handleDialogClose,children:(0,jsx_runtime.jsxs)(DialogContent.A,{children:[(0,jsx_runtime.jsx)(DialogTitle.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Gemini API Key"}),(0,jsx_runtime.jsx)(IconButton.A,{"aria-label":"close",onClick:handleDialogClose,sx:theme=>({position:"absolute",right:8,top:8,color:theme.palette.grey[500]}),children:(0,jsx_runtime.jsx)(Close.A,{})}),(0,jsx_runtime.jsxs)(Stack.A,{spacing:{xs:1,sm:2},sx:{width:{sm:"300px",md:"500px"}},children:[(0,jsx_runtime.jsx)(TextField.A,{autoComplete:"off",fullWidth:!0,type:"password",label:"Enter your key",value:apiKey,onChange:event=>setApiKey(event.target.value)}),(0,jsx_runtime.jsx)(Button.A,{onClick:()=>{deleteKey()},variant:"contained",color:"error",children:"Delete Key"})]})]})})]})};ControlPanel.__docgenInfo={description:"",methods:[],displayName:"ControlPanel",props:{clearMessages:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},apiKey:{required:!0,tsType:{name:"string"},description:""},setApiKey:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string>",elements:[{name:"string"}]}]},description:""},deleteKey:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var useTheme=__webpack_require__("./node_modules/@mui/material/styles/useTheme.js"),useMediaQuery=__webpack_require__("./node_modules/@mui/material/useMediaQuery/index.js"),Typography=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js"),CircularProgress=__webpack_require__("./node_modules/@mui/material/CircularProgress/CircularProgress.js");const ChatTextarea=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js").Ay.textarea({overflow:"hidden",fontSize:"16px",resize:"none",width:"100%",display:"block",boxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box",outline:"none",outlineStyle:"none",border:"none",margin:0,padding:0,minHeight:"60px",backgroundColor:"transparent",color:"white","&::placeholder":{color:"white"}});var Send=__webpack_require__("./node_modules/@mui/icons-material/esm/Send.js");const InputBox=_ref=>{let{textareaValue,setTextareaValue,handleSubmit,loading}=_ref;const theme=(0,useTheme.A)(),textareaRef=(0,react.useRef)(null),isMobile=(0,useMediaQuery.A)(theme.breakpoints.down("md"));return(0,jsx_runtime.jsx)(Box.A,{sx:{borderRadius:2,backgroundColor:grey.A[800],mb:3,transform:"translateZ(0)"},children:(0,jsx_runtime.jsx)(Box.A,{sx:{padding:2},children:(0,jsx_runtime.jsxs)("form",{onSubmit:handleSubmit,onKeyDown:e=>{e.ctrlKey&&("Enter"===e.key||e.metaKey)&&(e.preventDefault(),handleSubmit(e)),"Enter"!==e.key||e.ctrlKey||e.metaKey||e.preventDefault()},children:[(0,jsx_runtime.jsx)(ChatTextarea,{placeholder:"Enter your question",ref:textareaRef,value:textareaValue,onChange:e=>{const target=e.target;setTextareaValue(target.value),textareaRef.current&&(textareaRef.current.style.height="auto",textareaRef.current.style.height=`${target.scrollHeight}px`)},onKeyDown:e=>{"Enter"!==e.key||e.ctrlKey||e.metaKey||e.preventDefault()},disabled:loading}),(0,jsx_runtime.jsxs)(Box.A,{sx:{display:"flex",alignItems:"center",justifyContent:"right"},children:[isMobile?null:(0,jsx_runtime.jsx)(Typography.A,{variant:"caption",sx:{color:grey.A[600],mr:4},children:"To send, press Control(Ctrl) + Enter"}),(0,jsx_runtime.jsx)(Button.A,{type:"submit",endIcon:(0,jsx_runtime.jsx)(Send.A,{}),color:"primary",variant:"contained",disabled:loading,startIcon:loading?(0,jsx_runtime.jsx)(CircularProgress.A,{size:20}):null,sx:{borderRadius:4,backgroundColor:grey.A[500],"&:hover":{backgroundColor:grey.A[600]},color:"black"},children:loading?"Processing...":"Send"})]})]})})})};InputBox.__docgenInfo={description:"",methods:[],displayName:"InputBox",props:{textareaValue:{required:!0,tsType:{name:"string"},description:""},setTextareaValue:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string>",elements:[{name:"string"}]}]},description:""},handleSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.FormEvent) => Promise<void>",signature:{arguments:[{type:{name:"ReactFormEvent",raw:"React.FormEvent"},name:"e"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},loading:{required:!0,tsType:{name:"boolean"},description:""}}};var web=__webpack_require__("./node_modules/@google/genai/dist/web/index.mjs");const theme=(0,createTheme.A)({palette:{mode:"dark"}}),GeminiChatDarkDesign=()=>{const{apiKey,setApiKey,deleteKey}=(0,useAgentKey.G)(),googleGenerativeAI=(0,react.useMemo)((()=>new web.M4({apiKey})),[apiKey]),[textareaValue,setTextareaValue]=(0,react.useState)(""),[loading,setLoading]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(""),chatHistoryEnd=(0,react.useRef)(null),[messages,setMessages]=(0,react.useState)((()=>{try{const savedMessages=localStorage.getItem("MESSAGES_KEY");if(savedMessages){const parsedMessages=JSON.parse(savedMessages);if(parsedMessages.length>0)return parsedMessages}}catch(error){console.error("Error load from localStorage key MESSAGES_KEY:",error)}return[]}));(0,react.useEffect)((()=>{try{const valueToStore=JSON.stringify(messages);localStorage.setItem("MESSAGES_KEY",valueToStore)}catch(error){console.error("Error saving to localStorage key MESSAGES_KEY:",error)}}),[messages]);const scrollToBottom=()=>{chatHistoryEnd.current&&chatHistoryEnd.current.scrollIntoView({behavior:"auto",block:"center"})};(0,react.useEffect)((()=>{scrollToBottom()}),[]),(0,react.useEffect)((()=>{scrollToBottom()}),[messages]);return(0,jsx_runtime.jsxs)(ThemeProvider.A,{theme,children:[(0,jsx_runtime.jsx)(CssBaseline.Ay,{}),(0,jsx_runtime.jsx)(GlobalStyles.A,{styles:{body:{overflow:"hidden"}}}),(0,jsx_runtime.jsx)(Box.A,{sx:{height:"100vh",width:"100%",overflowY:"auto",position:"relative","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"grey.500",borderRadius:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"grey.100"}},children:(0,jsx_runtime.jsxs)(Container.A,{children:[(0,jsx_runtime.jsxs)(Container.A,{sx:{pb:19,pt:8},children:[(0,jsx_runtime.jsx)(ChatList,{messages}),(0,jsx_runtime.jsx)("div",{ref:chatHistoryEnd})]}),(0,jsx_runtime.jsx)(Container.A,{sx:{position:"fixed",top:0,left:0,right:0,mt:1},children:(0,jsx_runtime.jsx)(ControlPanel,{clearMessages:()=>{setMessages([])},apiKey,setApiKey,deleteKey})}),(0,jsx_runtime.jsx)(Container.A,{sx:{backgroundColor:theme.palette.background.default,position:"fixed",bottom:0,left:0,right:0},children:(0,jsx_runtime.jsx)(InputBox,{textareaValue,setTextareaValue,handleSubmit:async e=>{if(e.preventDefault(),!loading){const inputText=textareaValue;if(setTextareaValue(""),!inputText.trim())return;setLoading(!0),setError("");const messagesWithInput=[...messages,{parts:[{text:inputText}],role:ROLE_USER}];setMessages(messagesWithInput);try{const result=await googleGenerativeAI.models.generateContentStream({model:"gemini-1.5-flash",contents:messagesWithInput});setMessages((p=>[...p,{parts:[{text:""}],role:ROLE_MODEL}]));for await(const chunk of result){const chunkText=chunk.text;setMessages((previusMessages=>{const newMessages=[...previusMessages];return newMessages[newMessages.length-1].parts[0].text+=chunkText,newMessages}))}}catch(error){setError("Error: "+(error instanceof Error?error.message:"Failed to fetch")),console.error("API Error:",error)}finally{setLoading(!1)}}},loading})})]})})]})};GeminiChatDarkDesign.__docgenInfo={description:"",methods:[],displayName:"GeminiChatDarkDesign"};const GeminiChatDarkDesign_stories={title:"Apps/GeminiChatDarkDesign",component:GeminiChatDarkDesign,parameters:{layout:"fullscreen"}},Default={args:{}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {}\n}",...Default.parameters?.docs?.source}}}}}]);