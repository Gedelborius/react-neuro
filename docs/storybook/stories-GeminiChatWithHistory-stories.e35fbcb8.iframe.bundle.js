"use strict";(self.webpackChunkreact_neuro=self.webpackChunkreact_neuro||[]).push([[936],{"./src/components/AgentKey.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _mui_material__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mui/material/Accordion/Accordion.js"),_mui_material__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mui/material/AccordionSummary/AccordionSummary.js"),_mui_material__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js"),_mui_material__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mui/material/AccordionDetails/AccordionDetails.js"),_mui_material__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mui/material/Stack/Stack.js"),_mui_material__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@mui/material/TextField/TextField.js"),_mui_material__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@mui/material/Button/Button.js"),_mui_icons_material_ArrowForwardIosSharp__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mui/icons-material/esm/ArrowForwardIosSharp.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const AgentKey=_ref=>{let{apiKey,setApiKey,deleteKey}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_mui_material__WEBPACK_IMPORTED_MODULE_1__.A,{elevation:3,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_2__.A,{expandIcon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_icons_material_ArrowForwardIosSharp__WEBPACK_IMPORTED_MODULE_3__.A,{}),sx:{flexDirection:"row-reverse",".Mui-expanded & .MuiAccordionSummary-expandIconWrapper":{transform:"rotate(90deg)"}},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_4__.A,{variant:"h6",sx:{ml:2},children:"Gemini API Key"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_5__.A,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_mui_material__WEBPACK_IMPORTED_MODULE_6__.A,{spacing:{xs:1,sm:2},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_7__.A,{autoComplete:"off",fullWidth:!0,type:"password",label:"Enter your key",value:apiKey,onChange:event=>{setApiKey(event.target.value)}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_8__.A,{onClick:()=>{deleteKey()},variant:"contained",color:"error",children:"Delete Key"})]})})]})},__WEBPACK_DEFAULT_EXPORT__=AgentKey;AgentKey.__docgenInfo={description:"",methods:[],displayName:"AgentKey",props:{apiKey:{required:!0,tsType:{name:"string"},description:""},setApiKey:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},deleteKey:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}}},"./src/components/MaterialMarkdown.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>MaterialMarkdown});var react_markdown__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-markdown/lib/index.js"),_mui_material__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mui/material/styles/useTheme.js"),_mui_material__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js"),_mui_material__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mui/material/Link/Link.js"),_mui_material__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mui/material/List/List.js"),_mui_material__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mui/material/ListItem/ListItem.js"),_mui_material__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@mui/material/Divider/Divider.js"),_mui_material__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@mui/material/Paper/Paper.js"),_mui_material__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@mui/material/Box/Box.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const MaterialMarkdown=_ref=>{let{content}=_ref;const theme=(0,_mui_material__WEBPACK_IMPORTED_MODULE_1__.A)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_markdown__WEBPACK_IMPORTED_MODULE_2__.oz,{components:{h1:_ref2=>{let{node,...props}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{variant:"h3",gutterBottom:!0,...props})},h2:_ref3=>{let{node,...props}=_ref3;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{variant:"h4",gutterBottom:!0,...props})},h3:_ref4=>{let{node,...props}=_ref4;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{variant:"h5",gutterBottom:!0,...props})},p:_ref5=>{let{node,...props}=_ref5;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{variant:"body1",paragraph:!0,sx:{m:0},...props})},a:_ref6=>{let{node,...props}=_ref6;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_4__.A,{color:"secondary",underline:"hover",target:"_blank",rel:"noopener",...props})},ul:_ref7=>{let{node,...props}=_ref7;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_5__.A,{dense:!0,sx:{pl:4},...props})},ol:_ref8=>{let{node,...props}=_ref8;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_5__.A,{component:"ol",dense:!0,sx:{pl:4},...props})},li:_ref9=>{let{node,...props}=_ref9;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_6__.Ay,{sx:{display:"list-item",listStyleType:"disc",p:0,pl:"4px"},...props})},hr:_ref10=>{let{node,...props}=_ref10;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_7__.A,{sx:{my:2},...props})},blockquote:_ref11=>{let{node}=_ref11;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_8__.A,{variant:"outlined",sx:{p:2,my:2,borderLeft:`4px solid ${theme.palette.divider}`,bgcolor:"background.default"}})},code:_ref12=>{let{node,...props}=_ref12;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_9__.A,{component:"span",sx:{fontFamily:"monospace",bgcolor:"action.hover",px:.5,borderRadius:1,whiteSpace:"pre-wrap",p:2,my:1,display:"block"},...props})},strong:_ref13=>{let{node,...props}=_ref13;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{component:"span",fontWeight:"bold",...props})},em:_ref14=>{let{node,...props}=_ref14;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{component:"span",fontStyle:"italic",...props})}},children:content})};MaterialMarkdown.__docgenInfo={description:"",methods:[],displayName:"MaterialMarkdown",props:{content:{required:!0,tsType:{name:"string"},description:""}}}},"./src/components/TextInputForm.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>TextInputForm});var _mui_material__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mui/material/Paper/Paper.js"),_mui_material__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mui/material/TextField/TextField.js"),_mui_material__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mui/material/Box/Box.js"),_mui_material__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mui/material/Button/Button.js"),_mui_material__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mui/material/CircularProgress/CircularProgress.js"),_mui_material__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js"),_mui_material_colors__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@mui/material/colors/grey.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const TextInputForm=_ref=>{let{handleSubmit,input,loading,setInput}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_1__.A,{elevation:3,sx:{p:3},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form",{onSubmit:handleSubmit,onKeyDown:e=>{e.ctrlKey&&("Enter"===e.key||e.metaKey)&&(e.preventDefault(),handleSubmit(e)),"Enter"!==e.key||e.ctrlKey||e.metaKey||e.preventDefault()},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_2__.A,{fullWidth:!0,multiline:!0,minRows:3,maxRows:6,label:"Enter your question",variant:"outlined",value:input,onChange:e=>setInput(e.target.value),sx:{mb:2},disabled:loading,onKeyDown:e=>{"Enter"!==e.key||e.ctrlKey||e.metaKey||e.preventDefault()}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_4__.A,{type:"submit",variant:"contained",color:"primary",disabled:loading,startIcon:loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_5__.A,{size:20}):null,children:loading?"Processing...":"Ask Gemini"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_6__.A,{sx:{color:_mui_material_colors__WEBPACK_IMPORTED_MODULE_7__.A[500]},children:"Для отправки нажмите Control(Ctrl) + Enter"})]})]})})};TextInputForm.__docgenInfo={description:"",methods:[],displayName:"TextInputForm",props:{handleSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.FormEvent) => Promise<void>",signature:{arguments:[{type:{name:"ReactFormEvent",raw:"React.FormEvent"},name:"e"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},input:{required:!0,tsType:{name:"string"},description:""},loading:{required:!0,tsType:{name:"boolean"},description:""},setInput:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}}}},"./src/hooks/useAgentKey.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>useAgentKey});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const useAgentKey=()=>{const[apiKey,setApiKey]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((()=>{try{const savedData=localStorage.getItem("API_KEY");if(savedData){const parsedData=JSON.parse(savedData);if(parsedData.length>0)return parsedData}}catch(error){console.error("Error load from localStorage key API_KEY:",error)}return""}));(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{try{const valueToStore=JSON.stringify(apiKey);localStorage.setItem("API_KEY",valueToStore)}catch(error){console.error("Error saving to localStorage key API_KEY:",error)}}),[apiKey]);return{apiKey,setApiKey,deleteKey:()=>{localStorage.removeItem("API_KEY"),setApiKey("")}}}},"./src/hooks/useGoogleGenerativeAI.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j:()=>useGoogleGenerativeAI});var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@google/generative-ai/dist/index.mjs"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js");const useGoogleGenerativeAI=apiKey=>({googleGenerativeAI:(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.ij(apiKey)),[apiKey])})},"./src/interfaces/ChatHistoryInterfaces.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>ROLE_NAMES});const ROLE_NAMES={USER:"user",MODEL:"model"}},"./src/stories/GeminiChatWithHistory.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>GeminiChatWithHistory_stories});var Box=__webpack_require__("./node_modules/@mui/material/Box/Box.js"),Alert=__webpack_require__("./node_modules/@mui/material/Alert/Alert.js"),useAgentKey=__webpack_require__("./src/hooks/useAgentKey.ts"),useGoogleGenerativeAI=__webpack_require__("./src/hooks/useGoogleGenerativeAI.ts"),TextInputForm=__webpack_require__("./src/components/TextInputForm.tsx"),AgentKey=__webpack_require__("./src/components/AgentKey.tsx"),Paper=__webpack_require__("./node_modules/@mui/material/Paper/Paper.js"),List=__webpack_require__("./node_modules/@mui/material/List/List.js"),ListItem=__webpack_require__("./node_modules/@mui/material/ListItem/ListItem.js"),react=__webpack_require__("./node_modules/react/index.js"),MaterialMarkdown=__webpack_require__("./src/components/MaterialMarkdown.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const ChatHistory=_ref=>{let{messagesHistory}=_ref;const chatHistoryEnd=(0,react.useRef)(null),scrollToBottom=()=>{chatHistoryEnd.current&&chatHistoryEnd.current.scrollIntoView({behavior:"auto",block:"center"})};return(0,react.useEffect)((()=>{scrollToBottom()}),[]),(0,react.useEffect)((()=>{scrollToBottom()}),[messagesHistory]),(0,jsx_runtime.jsxs)(Paper.A,{elevation:3,sx:{height:"44vh",overflowY:"scroll",bgcolor:"background.default",display:"flex",flexDirection:"column",py:2,px:3},children:[(0,jsx_runtime.jsx)(List.A,{sx:{display:"flex",flexDirection:"column"},children:messagesHistory.map(((_ref2,index)=>{let{role,parts}=_ref2;return(0,jsx_runtime.jsx)(ListItem.Ay,{sx:{justifyContent:"user"===role?"flex-end":"flex-start",alignItems:"flex-start"},children:(0,jsx_runtime.jsx)(Paper.A,{sx:"user"===role?{p:1,backgroundColor:"primary.light"}:{p:1},children:(0,jsx_runtime.jsx)(MaterialMarkdown.d,{content:parts[0].text})})},index)}))}),(0,jsx_runtime.jsx)("div",{ref:chatHistoryEnd})]})};ChatHistory.__docgenInfo={description:"",methods:[],displayName:"ChatHistory",props:{messagesHistory:{required:!0,tsType:{name:"Array",elements:[{name:"IChatMessage"}],raw:"IChatMessage[]"},description:""}}};var ChatHistoryInterfaces=__webpack_require__("./src/interfaces/ChatHistoryInterfaces.ts");const GeminiChatWithHistory=()=>{const[input,setInput]=(0,react.useState)(""),[loading,setLoading]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(""),abortControllerRef=(0,react.useRef)(null),[messages,setMessages]=(0,react.useState)((()=>{try{const savedMessages=localStorage.getItem("MESSAGES_KEY");if(savedMessages){const parsedMessages=JSON.parse(savedMessages);if(parsedMessages.length>0)return parsedMessages}}catch(error){console.error("Error load from localStorage key MESSAGES_KEY:",error)}return[]})),{apiKey,setApiKey,deleteKey}=(0,useAgentKey.G)(),{googleGenerativeAI}=(0,useGoogleGenerativeAI.j)(apiKey);(0,react.useEffect)((()=>{try{const valueToStore=JSON.stringify(messages);localStorage.setItem("MESSAGES_KEY",valueToStore)}catch(error){console.error("Error saving to localStorage key MESSAGES_KEY:",error)}}),[messages]);return(0,jsx_runtime.jsxs)(Box.A,{sx:{maxWidth:800,margin:"auto",p:3,minHeight:"100vh",display:"flex",flexDirection:"column"},children:[(0,jsx_runtime.jsx)(Box.A,{children:(0,jsx_runtime.jsx)(ChatHistory,{messagesHistory:messages})}),(0,jsx_runtime.jsx)(Box.A,{sx:{mt:1},children:(0,jsx_runtime.jsx)(TextInputForm.C,{handleSubmit:async e=>{if(e.preventDefault(),!loading){const inputText=input;if(setInput(""),!inputText.trim())return;abortControllerRef.current=new AbortController,setLoading(!0),setError("");const messagesWithInput=[...messages,{parts:[{text:inputText}],role:ChatHistoryInterfaces.S.USER}];setMessages(messagesWithInput);try{var _abortControllerRef$c;const model=googleGenerativeAI.getGenerativeModel({model:"gemini-1.5-flash"}),result=await model.generateContentStream({contents:messagesWithInput},{signal:null===(_abortControllerRef$c=abortControllerRef.current)||void 0===_abortControllerRef$c?void 0:_abortControllerRef$c.signal});setMessages((p=>[...p,{parts:[{text:""}],role:ChatHistoryInterfaces.S.MODEL}]));let response="";for await(const chunk of result.stream){const chunkText=chunk.text();response+=chunkText,setMessages((previusMessages=>{const newMessages=[...previusMessages];return newMessages[newMessages.length-1].parts[0].text=response,newMessages}))}}catch(error){setError("Error: "+(error instanceof Error?error.message:"Failed to fetch")),console.error("API Error:",error)}finally{setLoading(!1),abortControllerRef.current=null}}},input,loading,setInput})}),(0,jsx_runtime.jsx)(Box.A,{sx:{mt:2},children:(0,jsx_runtime.jsx)(AgentKey.A,{apiKey,setApiKey,deleteKey})}),error&&(0,jsx_runtime.jsx)(Alert.A,{severity:"error",sx:{mt:2},children:error})]})};GeminiChatWithHistory.__docgenInfo={description:"",methods:[],displayName:"GeminiChatWithHistory"};const GeminiChatWithHistory_stories={title:"Pages/GeminiChatWithHistory",component:GeminiChatWithHistory},Default={args:{}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {}\n}",...Default.parameters?.docs?.source}}}}}]);